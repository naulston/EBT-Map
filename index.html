<html>

<head>
	<title>This is the header</title>

<!--Leaflet CSS File-->
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<link rel="stylesheet" href="styles.css" />
<link rel="stylesheet" href="leaflet.usermarker.css" />

<style>
#map{
	width:960px;
	height:500px;
}
</style>
	
</head>

<body>
<!--<a href="http://github.com/naulston/first-leaflet-map">-->
<h1>This is a map</h1>

<!--Div for my map-->
<div id="map"></div>

<!--Leaflet Java Script-->
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

<!--Link to Geojson file-->
<!--<script type="text/javascript" src="http://naulston.github.com/first-leaflet-map/EBT_Event_none.geojson"></script>-->

<script type="text/javascript" src="EBT_Event_none.geojson"></script>

<!--Map container Location of the map-->
<!--map.locate({setView: true, maxZoom: 15});...setView([51.505, -0.09], 13);-->

<script>
function init(){
    var map             = L.map('map', {center: [51.505, -0.09], zoom: 13}),
        marker          = L.marker(map.getCenter()).addTo(map),
        glcl            = google.loader.ClientLocation,
        onLocationfound = function(e){
          marker.setLatLng(e.latlng);
          map.setView(marker.getLatLng(),map.getZoom()); 
          alert('Marker has been set to position :'+marker.getLatLng().toString());
        };
        
    mapLink = '<ahref="http://openstreetmap.org">OpenStreetMap</a>';
        L.tileLayer(
            'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; ' + mapLink + ' Contributors',
            maxZoom: 18,
            }).addTo(map);
    
    map.on('locationfound', onLocationfound);
    
    if(glcl){//when google.loader.ClientLocation contains result
       onLocationfound({latlng:[glcl.latitude,glcl.longitude]});
    }else{alert('google.loader.ClientLocation fails');}
    map.locate();
}


L.geoJson(EBT_Locations).addTo(map);

var geoJson = L.geoJson(EBT_Locations, {
            onEachFeature: function (feature, layer) {
                layer.bindPopup(feature.properties.address);
            }
        });


</script>

</body>
</html>
